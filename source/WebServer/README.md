# WebServer

这里是WebServer的工作主要逻辑， 分别完成事件的注册，包括建立连接、处理用户请求、发送数据、关闭连接，同时初始化定时器、线程池，同时开启并设置日志，完成一系列初始化工作后，调用start开启Web服务器


### 建立连接
WebServer采用的是EPOLLET+EPOLLSHOT高效的事件处理模式，这里采用循环接受连接直到报错返回EAGAIN，Socket内部封装bind，listen，accept等操作，连接直接调用Socket接受即可，成功后完成在用户表上注册并注册定时器。


### 断开连接
在线程池中断开连接最重要的就是线程安全和性能的问题，因为线程在处理断开连接要访问共享数据，但如果这里要加一个全局的大锁，那多线程直接会退化成单线程，这里我为了兼顾性能和线程安全采用了另一种方式，接受连接和断开连接为了都是在主线程中进行的，断开连接注册了EPOLLRDHUP，当用户断开连接，EventLoop会直接从主线程断开连接，然后用户连接断开，不会激活可读事件去交由线程Read 0
